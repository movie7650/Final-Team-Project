<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.daitso.customer.repository.ICustomerRepository">

	<!-- 이메일 중복체크(중복되면 1, 중복되지 않으면 0 -->
	<select id="checkEmailDuplicated" parameterType="String" resultType="int">
        <![CDATA[
		select count(*)
		from customer
		where customer_email = #{customerEmail}
		]]>
    </select>
    
    <!-- 휴대폰번호 중복체크(중복되면 1, 중복되지 않으면 0 -->
	<select id="checkTelnoDuplicated" parameterType="String" resultType="int">
        <![CDATA[
		select count(*)
		from customer
		where customer_telno = #{customerTelno}
		]]>
    </select>
    
    
   	<!-- 회원가입 -->
    <insert id="insertIntoCustomer" parameterType="com.example.daitso.customer.model.CustomerSignUp">
    	<![CDATA[
	        INSERT INTO
	        	customer ( customer_id, customer_email, customer_pw, customer_nm, customer_telno, customer_dv )
	        VALUES
        	( customer_seq.nextval, #{customerEmail}, #{customerPw}, #{customerNm}, #{customerTelno}, 101)
        ]]>
    </insert>
</mapper>